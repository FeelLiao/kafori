[2025-08-23 01:02:04] [INFO] [uvicorn.error] Started server process [6072]
[2025-08-23 01:02:04] [INFO] [uvicorn.error] Waiting for application startup.
[2025-08-23 01:02:04] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7a3c77602cf0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-23 01:02:04] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-23 01:02:04] [INFO] [backend.main] RProcessor initialized
[2025-08-23 01:02:04] [INFO] [backend.main] Redis connection pool initialized
[2025-08-23 01:02:04] [INFO] [uvicorn.error] Application startup complete.
[2025-08-23 01:02:04] [INFO] [uvicorn.error] Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[2025-08-23 01:02:05] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-23 01:02:05] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-23 01:15:04] [INFO] [uvicorn.error] Shutting down
[2025-08-23 01:15:05] [INFO] [uvicorn.error] Waiting for application shutdown.
[2025-08-23 01:15:05] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-23 01:15:05] [INFO] [backend.main] RProcessor shut down
[2025-08-23 01:15:05] [INFO] [backend.main] Redis connection pool closed
[2025-08-23 01:15:05] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-23 01:15:05] [INFO] [uvicorn.error] Application shutdown complete.
[2025-08-23 01:15:05] [INFO] [uvicorn.error] Finished server process [6072]
[2025-08-23 01:15:05] [INFO] [rpy2.rinterface_lib.embedded] Embedded R ended.
[2025-08-23 02:28:10] [INFO] [uvicorn.error] Started server process [21771]
[2025-08-23 02:28:10] [INFO] [uvicorn.error] Waiting for application startup.
[2025-08-23 02:28:10] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7a53f0e2ea50>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-23 02:28:10] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-23 02:28:10] [INFO] [backend.main] RProcessor initialized
[2025-08-23 02:28:10] [INFO] [backend.main] Redis connection pool initialized
[2025-08-23 02:28:10] [INFO] [uvicorn.error] Application startup complete.
[2025-08-23 02:28:10] [INFO] [uvicorn.error] Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[2025-08-23 02:28:11] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-23 02:28:11] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-23 02:28:37] [INFO] [uvicorn.error] Shutting down
[2025-08-23 02:28:37] [INFO] [uvicorn.error] Waiting for application shutdown.
[2025-08-23 02:28:37] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-23 02:28:37] [INFO] [backend.main] RProcessor shut down
[2025-08-23 02:28:37] [INFO] [backend.main] Redis connection pool closed
[2025-08-23 02:28:37] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-23 02:28:37] [INFO] [uvicorn.error] Application shutdown complete.
[2025-08-23 02:28:37] [INFO] [uvicorn.error] Finished server process [21771]
[2025-08-23 02:28:37] [INFO] [rpy2.rinterface_lib.embedded] Embedded R ended.
[2025-08-23 02:30:11] [INFO] [uvicorn.error] Started server process [22796]
[2025-08-23 02:30:11] [INFO] [uvicorn.error] Waiting for application startup.
[2025-08-23 02:30:11] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7d539d97aa50>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-23 02:30:11] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-23 02:30:11] [INFO] [backend.main] RProcessor initialized
[2025-08-23 02:30:11] [INFO] [backend.main] Redis connection pool initialized
[2025-08-23 02:30:11] [INFO] [uvicorn.error] Application startup complete.
[2025-08-23 02:30:11] [INFO] [uvicorn.error] Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
[2025-08-23 02:30:12] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-23 02:30:12] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-23 02:30:21] [INFO] [uvicorn.error] Shutting down
[2025-08-23 02:30:21] [INFO] [uvicorn.error] Waiting for application shutdown.
[2025-08-23 02:30:21] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-23 02:30:21] [INFO] [backend.main] RProcessor shut down
[2025-08-23 02:30:21] [INFO] [backend.main] Redis connection pool closed
[2025-08-23 02:30:21] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-23 02:30:21] [INFO] [uvicorn.error] Application shutdown complete.
[2025-08-23 02:30:21] [INFO] [uvicorn.error] Finished server process [22796]
[2025-08-23 02:30:21] [INFO] [rpy2.rinterface_lib.embedded] Embedded R ended.
[2025-08-23 03:13:37] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7b13e6f5f4d0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-23 03:13:37] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-23 03:13:37] [INFO] [backend.main] RProcessor initialized
[2025-08-23 03:13:37] [INFO] [backend.main] Redis connection pool initialized
[2025-08-23 03:14:45] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-23 03:15:50] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7dc37a8af4d0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-23 03:15:50] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-23 03:15:50] [INFO] [backend.main] RProcessor initialized
[2025-08-23 03:15:50] [INFO] [backend.main] Redis connection pool initialized
[2025-08-23 03:16:36] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-23 03:16:45] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7630bf1574d0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-23 03:16:45] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-23 03:16:45] [INFO] [backend.main] RProcessor initialized
[2025-08-23 03:16:45] [INFO] [backend.main] Redis connection pool initialized
[2025-08-23 03:16:54] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-23 03:17:23] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7491ebe5b4d0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-23 03:17:23] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-23 03:17:23] [INFO] [backend.main] RProcessor initialized
[2025-08-23 03:17:23] [INFO] [backend.main] Redis connection pool initialized
[2025-08-23 03:25:06] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-23 03:25:06] [INFO] [backend.main] RProcessor shut down
[2025-08-23 03:25:06] [INFO] [backend.main] Redis connection pool closed
[2025-08-23 03:25:06] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-23 03:25:07] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x70ac0ecab4d0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-23 03:25:07] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-23 03:25:07] [INFO] [backend.main] RProcessor initialized
[2025-08-23 03:25:07] [INFO] [backend.main] Redis connection pool initialized
[2025-08-23 03:25:32] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-23 03:25:32] [INFO] [backend.main] RProcessor shut down
[2025-08-23 03:25:32] [INFO] [backend.main] Redis connection pool closed
[2025-08-23 03:25:32] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-23 03:25:34] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x729d819934d0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-23 03:25:34] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-23 03:25:34] [INFO] [backend.main] RProcessor initialized
[2025-08-23 03:25:34] [INFO] [backend.main] Redis connection pool initialized
[2025-08-23 03:33:15] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:10:56] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x73f166d4b4d0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:10:56] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:10:57] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:10:57] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:11:02] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:11:02] [INFO] [rpy2.rinterface_lib.embedded] Embedded R ended.
[2025-08-25 20:21:35] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x76616b0f8830>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:21:35] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:21:35] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:21:35] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:21:35] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x76616a541090>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:21:35] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:21:35] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:21:35] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:21:35] [INFO] [httpx] HTTP Request: POST http://testserver/token "HTTP/1.1 200 OK"
[2025-08-25 20:21:36] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:21:36] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:21:36] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-25 20:21:36] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:21:36] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:21:36] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:21:36] [INFO] [backend.api.files] xlsx file successfully read
[2025-08-25 20:21:36] [INFO] [backend.api.files] CollectionTime column successfully converted to datetime
[2025-08-25 20:21:36] [INFO] [backend.api.files] SampleAge column successfully converted to numeric
[2025-08-25 20:21:36] [INFO] [backend.api.files] test.xlsx SampleID format is valid.
[2025-08-25 20:21:36] [INFO] [backend.api.files] test.xlsx SampleID is unique.
[2025-08-25 20:21:36] [INFO] [backend.routers.file_routers] Sample sheet data is valid for user admin, saving to redis.
[2025-08-25 20:21:36] [INFO] [backend.routers.file_routers] Sample sheet for user admin saved to redis successfully.
[2025-08-25 20:21:36] [INFO] [httpx] HTTP Request: POST http://testserver/pipeline/sample_sheet/ "HTTP/1.1 200 OK"
[2025-08-25 20:21:36] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:21:36] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:21:36] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:21:36] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x76616a544510>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:21:36] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:21:36] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:21:36] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:21:36] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x76616a46dfd0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:21:36] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:21:36] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:21:36] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:21:36] [INFO] [httpx] HTTP Request: POST http://testserver/token "HTTP/1.1 200 OK"
[2025-08-25 20:21:37] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:21:37] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:21:37] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-25 20:21:37] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:21:37] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:21:37] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:21:37] [INFO] [backend.api.files] xlsx file successfully read
[2025-08-25 20:21:37] [ERROR] [backend.api.files] Error transfer collection time or sample age to standard format: test.xlsx
Traceback (most recent call last):
  File "/home/zhoujunjie/pythonproject/kafori/backend/api/files.py", line 80, in sample_data_validation
    df["CollectionTime"] = pd.to_datetime(df["CollectionTime"])
                           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/zhoujunjie/miniforge3/envs/kafori/lib/python3.13/site-packages/pandas/core/tools/datetimes.py", line 1067, in to_datetime
    values = convert_listlike(arg._values, format)
  File "/home/zhoujunjie/miniforge3/envs/kafori/lib/python3.13/site-packages/pandas/core/tools/datetimes.py", line 433, in _convert_listlike_datetimes
    return _array_strptime_with_fallback(arg, name, utc, format, exact, errors)
  File "/home/zhoujunjie/miniforge3/envs/kafori/lib/python3.13/site-packages/pandas/core/tools/datetimes.py", line 467, in _array_strptime_with_fallback
    result, tz_out = array_strptime(arg, fmt, exact=exact, errors=errors, utc=utc)
                     ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "strptime.pyx", line 501, in pandas._libs.tslibs.strptime.array_strptime
  File "strptime.pyx", line 451, in pandas._libs.tslibs.strptime.array_strptime
  File "strptime.pyx", line 583, in pandas._libs.tslibs.strptime._parse_with_format
ValueError: time data "2023098" doesn't match format "%Y-%m-%d %H:%M:%S", at position 1. You might want to try:
    - passing `format` if your strings have a consistent format;
    - passing `format='ISO8601'` if your strings are all ISO8601 but not necessarily in exactly the same format;
    - passing `format='mixed'`, and the format will be inferred for each element individually. You might want to use `dayfirst` alongside this.
[2025-08-25 20:21:37] [INFO] [httpx] HTTP Request: POST http://testserver/pipeline/sample_sheet/ "HTTP/1.1 200 OK"
[2025-08-25 20:21:37] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:21:37] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:21:37] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:21:37] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x76616a4a9650>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:21:37] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:21:37] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:21:37] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:21:37] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x76616a4a9650>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:21:37] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:21:37] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:21:37] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:21:45] [INFO] [httpx] HTTP Request: POST http://testserver/token "HTTP/1.1 200 OK"
[2025-08-25 20:21:38] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:21:38] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:21:38] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-25 20:21:38] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:21:38] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:21:38] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:21:38] [INFO] [backend.api.files] xlsx file successfully read
[2025-08-25 20:21:38] [INFO] [backend.api.files] CollectionTime column successfully converted to datetime
[2025-08-25 20:21:38] [INFO] [backend.api.files] SampleAge column successfully converted to numeric
[2025-08-25 20:21:38] [ERROR] [backend.api.files] test.xlsx SampleID contains invalid characters: ['1A-1', 'B_2']
[2025-08-25 20:21:38] [INFO] [httpx] HTTP Request: POST http://testserver/pipeline/sample_sheet/ "HTTP/1.1 200 OK"
[2025-08-25 20:21:38] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:21:38] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:21:38] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:21:38] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x76616b0fdef0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:21:38] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:21:38] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:21:38] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:21:38] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x76616a7b5b70>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:21:38] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:21:38] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:21:38] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:21:38] [INFO] [httpx] HTTP Request: POST http://testserver/token "HTTP/1.1 200 OK"
[2025-08-25 20:21:39] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:21:39] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:21:39] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-25 20:21:39] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:21:39] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:21:39] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:21:39] [INFO] [backend.api.files] xlsx file successfully read
[2025-08-25 20:21:39] [INFO] [backend.api.files] CollectionTime column successfully converted to datetime
[2025-08-25 20:21:39] [INFO] [backend.api.files] SampleAge column successfully converted to numeric
[2025-08-25 20:21:39] [INFO] [backend.api.files] test.xlsx SampleID format is valid.
[2025-08-25 20:21:39] [ERROR] [backend.api.files] test.xlsx SampleID contains duplicate values: ['A-1']
[2025-08-25 20:21:39] [INFO] [httpx] HTTP Request: POST http://testserver/pipeline/sample_sheet/ "HTTP/1.1 200 OK"
[2025-08-25 20:21:39] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:21:39] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:21:39] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:21:39] [INFO] [rpy2.rinterface_lib.embedded] Embedded R ended.
[2025-08-25 20:23:26] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7c1fce8334d0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:23:26] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:23:26] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:23:26] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:23:26] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7c1fcdde4050>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:23:26] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:23:26] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:23:26] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:23:26] [INFO] [httpx] HTTP Request: POST http://testserver/token "HTTP/1.1 200 OK"
[2025-08-25 20:23:27] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:23:27] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:23:27] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-25 20:23:27] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:23:27] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:23:27] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:23:27] [INFO] [backend.api.files] xlsx file successfully read
[2025-08-25 20:23:27] [INFO] [backend.api.files] CollectionTime column successfully converted to datetime
[2025-08-25 20:23:27] [INFO] [backend.api.files] SampleAge column successfully converted to numeric
[2025-08-25 20:23:27] [INFO] [backend.api.files] test.xlsx SampleID format is valid.
[2025-08-25 20:23:27] [INFO] [backend.api.files] test.xlsx SampleID is unique.
[2025-08-25 20:23:27] [INFO] [backend.routers.file_routers] Sample sheet data is valid for user admin, saving to redis.
[2025-08-25 20:23:27] [INFO] [backend.routers.file_routers] Sample sheet for user admin saved to redis successfully.
[2025-08-25 20:23:27] [INFO] [httpx] HTTP Request: POST http://testserver/pipeline/sample_sheet/ "HTTP/1.1 200 OK"
[2025-08-25 20:23:27] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:23:27] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:23:27] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:23:27] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7c1fce7d49d0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:23:27] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:23:27] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:23:27] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:23:27] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7c20491aed50>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:23:27] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:23:27] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:23:27] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:23:35] [INFO] [httpx] HTTP Request: POST http://testserver/token "HTTP/1.1 200 OK"
[2025-08-25 20:23:28] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:23:28] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:23:28] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-25 20:23:28] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:23:28] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:23:28] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:23:28] [INFO] [backend.api.files] xlsx file successfully read
[2025-08-25 20:23:28] [ERROR] [backend.api.files] Error transfer collection time or sample age to standard format: test.xlsx
Traceback (most recent call last):
  File "/home/zhoujunjie/pythonproject/kafori/backend/api/files.py", line 80, in sample_data_validation
    df["CollectionTime"] = pd.to_datetime(df["CollectionTime"])
                           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/zhoujunjie/miniforge3/envs/kafori/lib/python3.13/site-packages/pandas/core/tools/datetimes.py", line 1067, in to_datetime
    values = convert_listlike(arg._values, format)
  File "/home/zhoujunjie/miniforge3/envs/kafori/lib/python3.13/site-packages/pandas/core/tools/datetimes.py", line 433, in _convert_listlike_datetimes
    return _array_strptime_with_fallback(arg, name, utc, format, exact, errors)
  File "/home/zhoujunjie/miniforge3/envs/kafori/lib/python3.13/site-packages/pandas/core/tools/datetimes.py", line 467, in _array_strptime_with_fallback
    result, tz_out = array_strptime(arg, fmt, exact=exact, errors=errors, utc=utc)
                     ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "strptime.pyx", line 501, in pandas._libs.tslibs.strptime.array_strptime
  File "strptime.pyx", line 451, in pandas._libs.tslibs.strptime.array_strptime
  File "strptime.pyx", line 583, in pandas._libs.tslibs.strptime._parse_with_format
ValueError: time data "2023098" doesn't match format "%Y-%m-%d %H:%M:%S", at position 1. You might want to try:
    - passing `format` if your strings have a consistent format;
    - passing `format='ISO8601'` if your strings are all ISO8601 but not necessarily in exactly the same format;
    - passing `format='mixed'`, and the format will be inferred for each element individually. You might want to use `dayfirst` alongside this.
[2025-08-25 20:23:28] [INFO] [httpx] HTTP Request: POST http://testserver/pipeline/sample_sheet/ "HTTP/1.1 200 OK"
[2025-08-25 20:23:28] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:23:28] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:23:28] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:23:28] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7c1fcde47c50>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:23:28] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:23:28] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:23:28] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:23:28] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7c1fcde47c50>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:23:28] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:23:28] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:23:28] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:23:28] [INFO] [httpx] HTTP Request: POST http://testserver/token "HTTP/1.1 200 OK"
[2025-08-25 20:23:29] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:23:29] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:23:29] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-25 20:23:29] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:23:29] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:23:29] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:23:29] [INFO] [backend.api.files] xlsx file successfully read
[2025-08-25 20:23:29] [INFO] [backend.api.files] CollectionTime column successfully converted to datetime
[2025-08-25 20:23:29] [INFO] [backend.api.files] SampleAge column successfully converted to numeric
[2025-08-25 20:23:29] [ERROR] [backend.api.files] test.xlsx SampleID contains invalid characters: ['1A-1', 'B_2']
[2025-08-25 20:23:29] [INFO] [httpx] HTTP Request: POST http://testserver/pipeline/sample_sheet/ "HTTP/1.1 200 OK"
[2025-08-25 20:23:29] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:23:29] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:23:29] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:23:29] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7c2049222dd0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:23:29] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:23:29] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:23:29] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:23:29] [INFO] [tortoise] Tortoise-ORM started, {'default': <tortoise.backends.mysql.client.MySQLClient object at 0x7c1fcde3b5b0>}, {'models': {'ExpClass': <class 'backend.db.models.entity.ExpClass.ExpClass'>, 'Experiment': <class 'backend.db.models.entity.Experiment.Experiment'>, 'GeneExpressCounts': <class 'backend.db.models.entity.GeneExpressCounts.GeneExpressCounts'>, 'GeneExpressTpm': <class 'backend.db.models.entity.GeneExpressTpm.GeneExpressTpm'>, 'Sample': <class 'backend.db.models.entity.Sample.Sample'>}}
[2025-08-25 20:23:29] [INFO] [backend.analysis.analysis_base] Initialized process pool with 2 workers
[2025-08-25 20:23:29] [INFO] [backend.main] RProcessor initialized
[2025-08-25 20:23:29] [INFO] [backend.main] Redis connection pool initialized
[2025-08-25 20:23:29] [INFO] [httpx] HTTP Request: POST http://testserver/token "HTTP/1.1 200 OK"
[2025-08-25 20:23:30] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:23:30] [INFO] [backend.analysis.analysis_base] R environment initialized in process
[2025-08-25 20:23:30] [INFO] [backend.analysis.analysis_base] Process pool closed
[2025-08-25 20:23:30] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:23:30] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:23:30] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:23:30] [INFO] [backend.api.files] xlsx file successfully read
[2025-08-25 20:23:30] [INFO] [backend.api.files] CollectionTime column successfully converted to datetime
[2025-08-25 20:23:30] [INFO] [backend.api.files] SampleAge column successfully converted to numeric
[2025-08-25 20:23:30] [INFO] [backend.api.files] test.xlsx SampleID format is valid.
[2025-08-25 20:23:30] [ERROR] [backend.api.files] test.xlsx SampleID contains duplicate values: ['A-1']
[2025-08-25 20:23:30] [INFO] [httpx] HTTP Request: POST http://testserver/pipeline/sample_sheet/ "HTTP/1.1 200 OK"
[2025-08-25 20:23:30] [INFO] [backend.main] RProcessor shut down
[2025-08-25 20:23:30] [INFO] [backend.main] Redis connection pool closed
[2025-08-25 20:23:30] [INFO] [tortoise] Tortoise-ORM shutdown
[2025-08-25 20:23:30] [INFO] [rpy2.rinterface_lib.embedded] Embedded R ended.
